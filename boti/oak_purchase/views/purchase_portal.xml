<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <template
        id="oak_purchase_order_portal_content_inherit"
        name="Oak Purchase Order Portal"
        priority="110"
        inherit_id="purchase.portal_my_purchase_order"
    >>
        <xpath expr="//table/thead/tr" position="replace">
            <th>Products</th>
            <th
                class="text-right d-none d-sm-table-cell"
                t-if="order.state in ['purchase', 'done']"
            >Unit Price</th>
            <th class="text-right">Quantity</th>
            <th class="text-right">Requested Date</th>
            <th
                class="text-right"
                t-if="order.state in ['purchase', 'done']"
            >Subtotal</th>
        </xpath>
        <xpath expr="//table/tbody" position="replace">
            <t t-foreach="order.order_line" t-as="ol">
                <tr
                    t-att-class="'bg-200 font-weight-bold o_line_section' if ol.display_type == 'line_section' else 'font-italic o_line_note' if ol.display_type == 'line_note' else ''"
                >
                <t t-if="not ol.display_type">
                    <td>
                    <img
                                t-att-src="image_data_uri(resize_to_48(ol.product_id.image_1024))"
                                alt="Product"
                                class="d-none d-lg-inline"
                            />
                    <span t-esc="ol.name" />
                    </td>
                    <td
                            class="text-right d-none d-sm-table-cell"
                            t-if="order.state in ['purchase', 'done']"
                        >
                    <span
                                t-field="ol.price_unit"
                                t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: order.currency_id}"
                            />
                    </td>
                    <td class="text-right">
                    <span t-esc="ol.product_qty" />
                    </td>
                    <td class="text-right">
                        <t t-if="ol.requested_date">
                            <span
                                    t-esc="ol.requested_date"
                                    t-options='{"widget": "date"}'
                                />
                        </t>
                        <t t-else="">
                            <span>None</span>
                        </t>
                    </td>
                    <td class="text-right" t-if="order.state in ['purchase', 'done']">
                    <span
                                t-field="ol.price_subtotal"
                                t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: order.currency_id}"
                            />
                    </td>
                </t>
                <t t-if="ol.display_type == 'line_section'">
                    <td colspan="99">
                        <span t-field="ol.name" />
                    </td>
                    <t t-set="current_section" t-value="line" />
                    <t t-set="current_subtotal" t-value="0" />
                </t>
                <t t-if="ol.display_type == 'line_note'">
                    <td colspan="99">
                        <span t-field="ol.name" />
                    </td>
                </t>
                </tr>
            </t>
        </xpath>
    </template>
</odoo>
